<!DOCTYPE html>
<html>

<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Page Title</title>
</head>

<body>

    <button type="button" onclick="PickCard()">Pick a card</button>

    <h1><span id="card"></span></h1>

    <script>

        // $(document).ready(function () {
        //     TestAnswerCards();
        // });

        function QuestionCard(id, callback) {
            $.get("question_card/" + id, function (result) {
                callback(result.text, result.num_gaps);
            });
        }

        function AnswerCard(id, callback) {
            $.get("answer_card/" + id, function (result) {
                callback(result.text);
            });
        }

        function NumQuestionCards(callback) {
            $.get("num_question_cards", function (result) {
                callback(result);
            });
        }

        function NumAnswerCards(callback) {
            $.get("num_answer_cards", function (result) {
                callback(result);
            });
        }

        function PickCard() {
            NumQuestionCards(function (max_number) {
                random_number = Random(max_number);
                QuestionCard(random_number, function (card, gaps) {
                    $("#card").html(card + "     " + gaps);
                })
            })
        }

        function Random(max_num) {
            random_num = Math.floor(Math.random() * max_num) + 1;
            return random_num;
        }

        function AnswerCards(ids, cards, callback) {
            if (ids.length == 1) {
                AnswerCard(ids[0], function (card) {
                    cards.push(card)
                    callback(cards);
                });
            } else {
                AnswerCard(ids[0], function (card) {
                    ids.shift();
                    cards.push(card)
                    AnswerCards(ids, cards, callback);
                });
            }
        }

        function TestAnswerCards() {
            AnswerCards([21, 23, 34], [], function (cards) {
                console.log(cards);
                // output should be ["Soft, kissy missionary sex", "Agriculture", "Boogers"]
            })
        }

    </script>

</body>

</html>